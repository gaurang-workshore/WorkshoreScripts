// finsweet-modal script with custom function
"use strict";let openModalsCount=0;const handleModalBackground=a=>{const b=document.querySelector("[wio-type=\"modal-bg\"]");b&&(a?(openModalsCount++,b.style.display="block"):(openModalsCount--,0>=openModalsCount&&(openModalsCount=0,b.style.display="none")))};(()=>{function e(a,b,c,d){return a?(a.addEventListener(b,c,d),()=>a.removeEventListener(b,c,d)):m}function a(a,b,c){var d;let e=window.fsAttributes[a];return e.destroy=c||m,null==(d=e.resolve)||d.call(e,b),b}var c=Object.defineProperty,g=(a,b,d)=>b in a?c(a,b,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[b]=d,h="fs-attributes",d="modal",k="support",i=async(...a)=>{var b;let c=[];for(let d of a){let a=await(null==(b=window.fsAttributes[d])?void 0:b.loading);c.push(a)}return c},l=class{static activateAlerts(){this.alertsActivated=!0}static alert(a,b){if(this.alertsActivated&&window.alert(a),"error"===b)throw new Error(a)}};((a,b,c)=>(g(a,"symbol"==typeof b?b:b+"",c),c))(l,"alertsActivated",!1);var m=()=>{},b=(a,b)=>!!a&&b.includes(a),n=a=>null!=a,v=a=>"string"==typeof a,p=a=>{let b=a.split("-"),c=parseInt(b[b.length-1]);if(!isNaN(c))return c},u=a=>Object.keys(a),s=a=>!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length),r=(a,b="1",c="iife")=>{let d=`${a}${"esm"===c?".esm":""}.js`;return`https://cdn.jsdelivr.net/npm/@finsweet/attributes-${a}@${b}/${d}`},o=r("animation","1","esm"),x=async()=>{let{fsAttributes:a}=window;a.animation||(a.animation={});let{animation:b}=a;if(b.import)return b.import;try{return b.import=import(o),b.import}catch(a){return void l.alert(`${a}`,"error")}},w=async()=>{var a;let{fsAttributes:b,location:c}=window,{host:d,searchParams:e}=new URL(c.href);return!!(d.includes("webflow.io")&&e.has(`${h}-${k}`))&&(null==(a=b.import)?void 0:a.call(b,k,"1"))},t=a=>b=>`${a}${b?`-${b}`:""}`,z=b=>{let c=(d,e,f)=>{let g,h=b[d],{key:a,values:c}=h;if(!e)return`[${a}]`;let i=null==c?void 0:c[e];g=v(i)?i:i(f&&"instanceIndex"in f?f.instanceIndex:void 0);let j=f&&"caseInsensitive"in f&&f.caseInsensitive?"i":"";if(!(null!=f&&f.operator))return`[${a}="${g}"${j}]`;switch(f.operator){case"prefixed":return`[${a}^="${g}"${j}]`;case"suffixed":return`[${a}$="${g}"${j}]`;case"contains":return`[${a}*="${g}"${j}]`;}};return[c,function(b,d){let e=c("element",b,d),f=(null==d?void 0:d.scope)||document;return null!=d&&d.all?[...f.querySelectorAll(e)]:f.querySelector(e)},(a,c)=>{let d=b[c];return d?a.getAttribute(d.key):null}]},A={preventLoad:{key:`${h}-preventload`},debugMode:{key:`${h}-debug`},src:{key:"src",values:{finsweet:"@finsweet/attributes"}},dev:{key:`${h}-dev`}},[B,D]=z(A),E=a=>{let{currentScript:b}=document,c={};if(!b)return{attributes:c,preventsLoad:!1};let d={preventsLoad:v(b.getAttribute(A.preventLoad.key)),attributes:c};for(let c in a){let e=b.getAttribute(a[c]);d.attributes[c]=e}return d},I=()=>{let a=K();if(window.fsAttributes&&!Array.isArray(window.fsAttributes))return void L(window.fsAttributes,a);let b=J(a);L(b,a),F(b),window.fsAttributes=b,window.FsAttributes=window.fsAttributes,w()},J=a=>{let b={cms:{},push(...a){var b,c;for(let[d,e]of a)null==(c=null==(b=this[d])?void 0:b.loading)||c.then(e)},async import(c,a){let d=b[c];return d||new Promise(d=>{let e=document.createElement("script");e.src=r(c,a),e.async=!0,e.onload=()=>{let[e]=L(b,[c]);d(e)},document.head.append(e)})},destroy(){var b,c;for(let d of a)null==(c=null==(b=window.fsAttributes[d])?void 0:b.destroy)||c.call(b)}};return b},K=()=>{let a=B("src","finsweet",{operator:"contains"}),b=B("dev");return[...document.querySelectorAll(`script${a}, script${b}`)].reduce((b,c)=>{var d;let e=c.getAttribute(A.dev.key)||(null==(d=c.src.match(/[\w-. ]+(?=(\.js)$)/))?void 0:d[0]);return e&&!b.includes(e)&&b.push(e),b},[])},L=(a,b)=>b.map(b=>{let c=a[b];return c||(a[b]={},c=a[b],c.loading=new Promise(a=>{c.resolve=b=>{a(b),delete c.resolve}}),c)}),F=a=>{let b=Array.isArray(window.fsAttributes)?window.fsAttributes:[];a.push(...b)},M=()=>{var a,b;return null==(b=(a=window.fsAttributes).import)?void 0:b.call(a,"a11y","1")},N=(a=21)=>crypto.getRandomValues(new Uint8Array(a)).reduce((a,b)=>(b&=63,a+=36>b?b.toString(36):62>b?(b-26).toString(36).toUpperCase():62<b?"-":"_",a),""),O=a=>{if(!a.id||document.getElementById(a.id)!==a){let b=N();return a.id=b,b}return a.id},H=(a,b)=>{let c=a.getAttribute(b);return c?p(c):void 0},P="role",j="aria-roledescription",q=(a,b,c)=>{let d=O(a),e=s(a);a.setAttribute(P,"dialog"),a.setAttribute("aria-modal","true");for(let f of[...b,...c]){if(f.hasAttribute("aria-hidden"))continue;O(f);let a=b.includes(f)?"open":"close";f.setAttribute("tabindex","0"),f.setAttribute(P,"button"),f.setAttribute("aria-controls",d),f.setAttribute("aria-haspopup","dialog"),f.setAttribute("aria-expanded",e+""),f.hasAttribute(j)||f.setAttribute(j,`${a}-modal-trigger`)}},Q=`fs-${d}`,f={element:{key:`${Q}-element`,values:{modal:t("modal"),open:t("open"),close:t("close")}},animation:{key:`${Q}-${"animation"}`},easing:{key:`${Q}-${"easing"}`},duration:{key:`${Q}-${"duration"}`},display:{key:`${Q}-${"display"}`}},[G,R,S]=z(f),y=["block","inline","inline-block","flex","inline-flex","grid","inline-grid","none","contents"],T=(d,{animations:f,easings:e})=>{let g=S(d,"animation"),h=b(g,u(f))?f[g]:f.fade,i=S(d,"duration"),j=S(d,"easing"),k=S(d,"display"),a=b(j,e)?j:void 0,c=i?parseFloat(i)/1e3:void 0,m=b(k,y)?k:void 0;return{actions:h,duration:c,easing:a,display:m}};const C=(b,d,f,g,h)=>{let{parentElement:i}=b;if(!i)return;let{actions:j,duration:k,easing:a,display:c}=g,n=U(b,h),l=new Comment(`${Q}-anchor`);i.insertBefore(l,b);let m,o=!1;const p=d.map(d=>e(d,"click",async d=>{d.preventDefault();o||m||(o=!0,handleModalBackground(!0),await Promise.all([j.animateIn(b,{duration:k,easing:a,display:c||"flex",target:document.body}),Promise.all(n.map(([b,{actions:c,duration:d,easing:e,display:f}])=>c.animateIn(b,{display:f,duration:d||k,easing:e||a})))]),o=!1,m=!0)})),q=f.map(c=>e(c,"click",async c=>{c.preventDefault();o||!1===m||(o=!0,handleModalBackground(!1),await Promise.all([j.animateOut(b,{duration:k,easing:a,target:i,insertAfter:l}),Promise.all(n.map(([b,{actions:c,duration:d,easing:e}])=>c.animateOut(b,{duration:d||k,easing:e||a})))]),i.insertBefore(b,l),o=!1,m=!1)}));return()=>{for(let a of p)a();for(let a of q)a()}},U=(a,b)=>{let c=["animation","duration","easing","display"].map(a=>G(a)).join(",");return[...a.querySelectorAll(c)].map(c=>{let d=T(c,b);return[c,d]})};var V=(a,b)=>{let{parentElement:c}=a;if(c){let c=H(a,f.element.key),d=R("open",{instanceIndex:c,all:!0}),e=R("close",{instanceIndex:c,all:!0});if(d.length||e.length){let c=T(a,b);return q(a,d,e),C(a,d,e,c,b)}}};(({scriptAttributes:b,attributeKey:c,version:d,init:e})=>{var f;I(),(f=window.fsAttributes)[c]||(f[c]={});let{preventsLoad:g,attributes:h}=E(b),i=window.fsAttributes[c];i.version=d,i.init=e,g||(window.Webflow||(window.Webflow=[]),window.Webflow.push(()=>e(h)))})({init:async()=>{await i("cmsattribute");let b=R("modal",{operator:"prefixed",all:!0}),c=await x();if(!c)return a(d,b);let e=b.map(a=>V(a,c)).filter(n);return M(),a(d,b,()=>{for(let a of e)a()})},version:"1.1.3",attributeKey:d}),x()})();
